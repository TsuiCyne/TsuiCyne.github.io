<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tsuicyne.github.io","root":"/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="#BJ190619这个项目是我在参加物联网应用工程师考核时所做的项目。项目的技术重点虽然在于语音识别功能的实现，但这其中还包括关于Linux环境搭建、开发平台与PC的文件传输、BMP刷图、触摸屏操作判断等其他的相关知识。简而言之，这是一个较为完整的嵌入式开发项目，基本的嵌入式开发步骤都能在这找到，希望这个笔记能对你有所帮助。也由于我是边完成项目边整理笔记的缘故，这篇文章的更新时间跨度也变得有些长，">
<meta property="og:type" content="article">
<meta property="og:title" content="基于Cortex-A53的语音识别系统">
<meta property="og:url" content="https://tsuicyne.github.io/BJ190619/index.html">
<meta property="og:site_name" content="Beluga">
<meta property="og:description" content="#BJ190619这个项目是我在参加物联网应用工程师考核时所做的项目。项目的技术重点虽然在于语音识别功能的实现，但这其中还包括关于Linux环境搭建、开发平台与PC的文件传输、BMP刷图、触摸屏操作判断等其他的相关知识。简而言之，这是一个较为完整的嵌入式开发项目，基本的嵌入式开发步骤都能在这找到，希望这个笔记能对你有所帮助。也由于我是边完成项目边整理笔记的缘故，这篇文章的更新时间跨度也变得有些长，">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-06-19T07:13:00.000Z">
<meta property="article:modified_time" content="2020-01-21T08:27:00.000Z">
<meta property="article:author" content="TsuiCyne">
<meta property="article:tag" content="Ubuntu">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="C">
<meta property="article:tag" content="嵌入式">
<meta property="article:tag" content="语音识别">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://tsuicyne.github.io/BJ190619/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>基于Cortex-A53的语音识别系统 | Beluga</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Beluga</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">鲸</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tsuicyne.github.io/BJ190619/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TsuiCyne">
      <meta itemprop="description" content="小  徐">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Beluga">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          基于Cortex-A53的语音识别系统
        </h1>

        <div class="post-meta">
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-21 16:27" itemprop="dateModified" datetime="2020-01-21T16:27:00+08:00">2020-01-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/%E9%A1%B9%E7%9B%AE/" itemprop="url" rel="index"><span itemprop="name">项目</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/BJ190619/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/BJ190619/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><em>#BJ190619</em><br>这个项目是我在参加物联网应用工程师考核时所做的项目。项目的技术重点虽然在于语音识别功能的实现，但这其中还包括关于Linux环境搭建、开发平台与PC的文件传输、BMP刷图、触摸屏操作判断等其他的相关知识。简而言之，这是一个较为完整的嵌入式开发项目，基本的嵌入式开发步骤都能在这找到，希望这个笔记能对你有所帮助。<br>也由于我是边完成项目边整理笔记的缘故，这篇文章的更新时间跨度也变得有些长，理解万岁！_(:з」∠)_</p>
<a id="more"></a>
<p>倘若发现文章有所纰漏或存在不妥之处，还望指正</p>
<h1 id="硬件环境"><a href="#硬件环境" class="headerlink" title="硬件环境"></a>硬件环境</h1><h2 id="开发平台-GEC6818"><a href="#开发平台-GEC6818" class="headerlink" title="开发平台 GEC6818"></a>开发平台 GEC6818</h2><p>这个项目使用的是GEC6818开发平台，该平台搭载三星Cortex-A53系列八核处理器S5P6818，最高主频可以达到1.4GHz，可以用于嵌入式Linux和Android等操作系统的驱动、应用开发。开发板支持千兆以太网、板载LVDS接口、MIPI接口、USB接口等</p>
<h2 id="处理芯片-S5P6818"><a href="#处理芯片-S5P6818" class="headerlink" title="处理芯片 S5P6818"></a>处理芯片 S5P6818</h2><p>S5P6818是三星的64位八核Cortex-A53架构处理器，它和S5P4418芯片管脚完全兼容，唯一不同的就是ARM内核不一样。二者芯片差异如下</p>


<h1 id="操作系统烧写"><a href="#操作系统烧写" class="headerlink" title="操作系统烧写"></a>操作系统烧写</h1><p>这个板子现在是已经烧好Linux系统，一个操作系统主要包括引导程序（uboot）烧写、内核（kernel）烧写以及文件系统（file_system）烧写<br>（这次主要偏向于Linux系统应用，操作系统部分就先挖个坑好了_(:з」∠)_</p>
<h1 id="Linux环境搭建"><a href="#Linux环境搭建" class="headerlink" title="Linux环境搭建"></a>Linux环境搭建</h1><h2 id="开机过程"><a href="#开机过程" class="headerlink" title="开机过程"></a>开机过程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;		加载		挂载</span><br><span class="line">&#x2F;&#x2F;	uboot	---&gt;	kernel	---&gt;	file_system</span><br><span class="line">&#x2F;&#x2F;     引导程序           内核             文件系统</span><br></pre></td></tr></table></figure>

<h3 id="加载引导"><a href="#加载引导" class="headerlink" title="加载引导"></a>加载引导</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Enter into Normal mode</span><br><span class="line">Hit any key to stop autoboot:  3	---&gt; 倒数3秒内，只要按下回车键，就会进入uboot引导程序</span><br><span class="line">					---&gt; 倒数3秒内，不按下回车键，就会加载内核</span><br></pre></td></tr></table></figure>

<h3 id="加载内核"><a href="#加载内核" class="headerlink" title="加载内核"></a>加载内核</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Boot with zImage	（内核的镜像文件）</span><br><span class="line"></span><br><span class="line">Starting kernel ...</span><br><span class="line"></span><br><span class="line">Uncompressing Linux... done, booting the kernel.		---&gt; 开始加载内核</span><br><span class="line">   ...</span><br><span class="line">&#x2F;&#x2F;内核的工作:初始化硬件接口</span><br><span class="line">[    2.132032] USB Serial support registered for iuu_phoenix	---&gt; 串口模块</span><br><span class="line">[    2.930616] Bluetooth: HCI UART driver ver 2.2		---&gt; 蓝牙模块</span><br><span class="line">[    3.162201] TCP cubic registered</span><br><span class="line">[    3.165367] NET: Registered protocol family 10		---&gt; 网口硬件设备</span><br><span class="line">[    3.171439] lo: Disabled Privacy Extensions</span><br><span class="line">[    3.179299] Mobile IPv6</span><br><span class="line">[    3.179328] IPv6 over IPv4 tunneling driver</span><br><span class="line">   ...</span><br><span class="line">[   21.717123] GEC210 audio driver Playback mapping OK</span><br><span class="line">[   21.717736] GEC210 audio driver Capture mapping OK		---&gt; 内核加载完成</span><br></pre></td></tr></table></figure>

<h3 id="挂载文件系统"><a href="#挂载文件系统" class="headerlink" title="挂载文件系统"></a>挂载文件系统</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC210 &#x2F;]#	---&gt; 开发板中文件系统的命令行</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：uboot/kernel/file_system储存在nandflash中</p>
</blockquote>
<h2 id="连接PC"><a href="#连接PC" class="headerlink" title="连接PC"></a>连接PC</h2><ol>
<li>正确连接板子的电源线、串口线及USB转串口线<br> USB接PC<br> 公口接开发板自带的串口线的一端母口，另一端母口接开发板串口的公口</li>
<li>安装USB转串口驱动<br> 1) 安装PL2303驱动<br> <code>\tool\PL2303_Prolific_DriverInstaller_v1210.exe</code><br> 2) 安装Hl-340驱动<br> <code>\tool\Hl-340.exe</code><br> 3) PC查看串口号<br> <code>计算机</code> — <code>管理</code> — <code>设备管理器</code> — <code>端口（COM和LPT）</code> — <code>查看到具体的串口号（如COM3）</code></li>
<li>打开串口终端(SecureCRT)<br> 端口选前面查到的串口号，其他的按图中配置 
 给开发板上电，在终端上显示开发板的启动信息 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[    4.123000] EXT4-fs (mmcblk0p2): re-mounted. Opts: data&#x3D;ordered</span><br><span class="line">[    4.455000] eth0: device MAC address 96:12:7e:f0:02:8e</span><br><span class="line">[    4.462000] stmmac_open: failed PTP initialisation</span><br><span class="line">[    4.473000] gecBt    initialized</span><br><span class="line">[    4.680000] usbcore: registered new interface driver rtl8723bu	---&gt; 开发板成功启动并进入系统，界面上会显示应用程序的界面</span><br></pre></td></tr></table></figure>
 但是，串口终端不能输入，按<code>[Ctrl]</code>+<code>[C]</code>，进入到命令行操作界面 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC6818 &#x2F;IOT]#	---&gt; 默认路径为&#x2F;IOT</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://tsuicyne.github.io/2019/06/19/BJ190619/#修改默认路径">修改默认路径</a></p>
</blockquote>
</li>
</ol>
<h2 id="传输文件"><a href="#传输文件" class="headerlink" title="传输文件"></a>传输文件</h2><h3 id="串口传输文件"><a href="#串口传输文件" class="headerlink" title="串口传输文件"></a>串口传输文件</h3><p><strong>速度慢，但比较方便，无需其他工具，适用于传输小文件</strong><br>通过rx命令来进行传输</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">[root@GEC6818 &#x2F;]#rx 文件名</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">[root@GEC6818 &#x2F;]#.&#x2F;aaa		---&gt; aaa是保存文件名，不一定是原文件名</span><br><span class="line">CCC</span><br><span class="line">等用户去添加要上传的文件</span><br><span class="line">选择&quot;传输&quot; --- 发送x modem --- 在弹出的对话框中，选择要上传的文件 --- 确定</span><br><span class="line">开始 xmodem 传输</span><br><span class="line">100%       7 KB    7 KB&#x2F;s 00:00:01       0 Errors</span><br></pre></td></tr></table></figure>

<h3 id="网线传输文件"><a href="#网线传输文件" class="headerlink" title="网线传输文件"></a>网线传输文件</h3><p><strong>适用于传输中型大小的文件</strong></p>
<blockquote>
<p>设置IP时要确保开发板IP与PC-IP处于同一网段<br>Windows下还需关闭该网络防火墙<br>本次测试IP：<br>PC-IP：<code>172.16.17.200</code><br>GEC6818-IP：<code>172.16.17.201</code></p>
</blockquote>
<ol>
<li><p>查看开发板IP</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC6818 &#x2F;]#ifconfig</span><br><span class="line">eth0      Link encap:Ethernet  HWaddr FE:12:5E:C8:00:77  </span><br><span class="line">	  inet6 addr: fe80::fc12:5eff:fec8:77&#x2F;64 Scope:Link</span><br><span class="line">	  UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">	  RX packets:28 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">	  TX packets:5 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">	  collisions:0 txqueuelen:1000 </span><br><span class="line">	  RX bytes:2472 (2.4 KiB)  TX bytes:378 (378.0 B)</span><br><span class="line">	  Interrupt:80 </span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">	  inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">	  inet6 addr: ::1&#x2F;128 Scope:Host</span><br><span class="line">	  UP LOOPBACK RUNNING  MTU:16436  Metric:1</span><br><span class="line">	  RX packets:0 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">	  TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">	  collisions:0 txqueuelen:0 </span><br><span class="line">	  RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</span><br></pre></td></tr></table></figure></li>
<li><p>设置开发板IP</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">1.1) 临时配置IP（仅本次开机有效，重启后恢复）</span><br><span class="line">[root@GEC6818 &#x2F;]#ifconfig eth0 172.16.17.201	---&gt; 给开发板设置一个IP</span><br><span class="line">[root@GEC6818 &#x2F;]#ifconfig eth0 up		---&gt; 开启网卡</span><br><span class="line"></span><br><span class="line">1.2) 永久配置IP</span><br><span class="line">&#x2F;&#x2F;用vi打开配置文件</span><br><span class="line">[root@GEC6818 &#x2F;]#vi &#x2F;etc&#x2F;profile</span><br><span class="line">&#x2F;&#x2F;加入网络配置命令</span><br><span class="line">ifconfig eth0 172.16.17.201</span><br><span class="line">ifconfig eth0 up</span><br><span class="line"></span><br><span class="line">2) 重启开发板</span><br><span class="line">	 </span><br><span class="line">3) 查看确认</span><br><span class="line">[root@GEC6818 &#x2F;]#ifconfig </span><br><span class="line">eth0      Link encap:Ethernet  HWaddr FE:12:5E:C8:00:77  </span><br><span class="line">	  inet addr:172.16.17.201  Bcast:172.16.255.255  Mask:255.255.0.0</span><br><span class="line">	  inet6 addr: fe80::fc12:5eff:fec8:77&#x2F;64 Scope:Link</span><br><span class="line">	  UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">	  RX packets:43 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">	  TX packets:6 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">	  collisions:0 txqueuelen:1000 </span><br><span class="line">	  RX bytes:3468 (3.3 KiB)  TX bytes:468 (468.0 B)</span><br><span class="line">	  Interrupt:80 </span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">	  inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">	  inet6 addr: ::1&#x2F;128 Scope:Host</span><br><span class="line">	  UP LOOPBACK RUNNING  MTU:16436  Metric:1</span><br><span class="line">	  RX packets:0 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">	  TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">	  collisions:0 txqueuelen:0 </span><br><span class="line">	  RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">4) 测试能否ping通	</span><br><span class="line">[root@GEC6818 &#x2F;]#</span><br><span class="line">[  206.492000] PHY: stmmac-0:04 - Link is Up - 1000&#x2F;Full	---&gt; 网线连上</span><br><span class="line">[  228.540000] PHY: stmmac-0:04 - Link is Down			---&gt; 网线断开</span><br><span class="line">[  234.552000] PHY: stmmac-0:04 - Link is Up - 1000&#x2F;Full</span><br><span class="line"></span><br><span class="line">[root@GEC6818 &#x2F;]#ping 172.16.17.200</span><br><span class="line">PING 172.16.17.200 (172.16.17.200): 56 data bytes</span><br><span class="line">64 bytes from 172.16.17.200: seq&#x3D;0 ttl&#x3D;128 time&#x3D;1.132 ms</span><br><span class="line">64 bytes from 172.16.17.200: seq&#x3D;1 ttl&#x3D;128 time&#x3D;0.901 ms</span><br><span class="line">64 bytes from 172.16.17.200: seq&#x3D;2 ttl&#x3D;128 time&#x3D;0.869 ms</span><br><span class="line">64 bytes from 172.16.17.200: seq&#x3D;3 ttl&#x3D;128 time&#x3D;0.906 ms</span><br><span class="line">64 bytes from 172.16.17.200: seq&#x3D;4 ttl&#x3D;128 time&#x3D;0.964 ms</span><br><span class="line">64 bytes from 172.16.17.200: seq&#x3D;5 ttl&#x3D;128 time&#x3D;0.889 ms</span><br></pre></td></tr></table></figure></li>
<li><p>设置<code>tftp</code>工具（将PC设为服务器）</p>
 
<p> <code>当前目录</code>：选择要传输的文件目录<br> <code>Server interface</code>：当前PC-IP，一般使用静态IP</p>
</li>
<li><p>通过<code>tftp</code>传输文件<br> 1) PC发送到开发板</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">tftp PC-IP -g -r 文件名		---&gt; 通过tftp从服务器（PC）取得文件	</span><br><span class="line">或：</span><br><span class="line">tftp -g -r 文件名 PC-IP</span><br><span class="line"></span><br><span class="line">注：文件名要填写传输文件目录下完整带后缀文件名</span><br></pre></td></tr></table></figure>

<p> 2) 开发板发送到电脑</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">tftp PC-IP -p -r 文件名</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">[root@GEC6818 &#x2F;IOT]#tftp 172.16.17.200 -p -r iot</span><br><span class="line">iot                  100% |*******************************|  4250k  0:00:00 ETA</span><br><span class="line"></span><br><span class="line">解释：</span><br><span class="line">[root@GEC6818 &#x2F;]#tftp</span><br><span class="line">BusyBox v1.25.1 (2016-12-27 14:19:25 CST) multi-call binary.</span><br><span class="line"></span><br><span class="line">Usage: tftp [OPTIONS] HOST [PORT]</span><br><span class="line"></span><br><span class="line">Transfer a file from&#x2F;to tftp server</span><br><span class="line"></span><br><span class="line">	-l FILE Local FILE</span><br><span class="line">	-r FILE Remote FILE</span><br><span class="line">	-g      Get file</span><br><span class="line">	-p      Put file</span><br><span class="line">	-b SIZE Transfer blocks of SIZE octets</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="U盘传输文件"><a href="#U盘传输文件" class="headerlink" title="U盘传输文件"></a>U盘传输文件</h3><ol>
<li>插入U盘到开发板USB接口</li>
<li>切换到U盘所在的目录 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC6818 &#x2F;mnt&#x2F;udisk]#pwd</span><br><span class="line">&#x2F;mnt&#x2F;udisk				---&gt; U盘内容所在目录</span><br></pre></td></tr></table></figure></li>
<li>通过cp命令进行文件的拷贝</li>
</ol>
<h2 id="交叉编译"><a href="#交叉编译" class="headerlink" title="交叉编译"></a>交叉编译</h2><h3 id="交叉编译作用"><a href="#交叉编译作用" class="headerlink" title="交叉编译作用"></a>交叉编译作用</h3><ol>
<li>开发板中执行project文件（在Ubuntu中使用gcc编译生成） <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC210 &#x2F;]# .&#x2F;project </span><br><span class="line">-&#x2F;bin&#x2F;sh: .&#x2F;project: Permission denied					---&gt; 权限拒绝</span><br></pre></td></tr></table></figure></li>
<li>查看project文件属性 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC210 &#x2F;]# ls -l project</span><br><span class="line">-rw-r--r--    1 root     root          7161 Jan  1 13:31 project	---&gt; 没有执行权限</span><br></pre></td></tr></table></figure></li>
<li>添加执行权限，再次执行 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC210 &#x2F;]# chmod 777 project</span><br><span class="line">[root@GEC210 &#x2F;]# .&#x2F;project</span><br><span class="line">.&#x2F;project: line 1: syntax error: unexpected &quot;(&quot;		---&gt; 依旧报错，原来是文件架构不一致</span><br></pre></td></tr></table></figure></li>
<li>在Ubuntu中查看文件属性 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gec@ubuntu:&#x2F;mnt&#x2F;hgfs&#x2F;wydx&#x2F;01&#x2F;code$ file project</span><br><span class="line">project: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU&#x2F;Linux 2.6.24, BuildID[sha1]&#x3D;0xb08b58b638cde5389b3e48434ef683e7a3b4b0d2, not stripped</span><br></pre></td></tr></table></figure>
 这里可以看到<code>Intel 80386</code>，说明该project文件是x86架构，只能在x86平台执行</li>
<li>为了使该文件是ARM架构，这就要使用交叉编译器<code>arm-linux-gcc</code>编译</li>
<li>重新在Ubuntu中编译project.c文件 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gec@ubuntu:&#x2F;mnt&#x2F;hgfs&#x2F;wydx&#x2F;01&#x2F;code$ arm-linux-gcc project.c -o project</span><br></pre></td></tr></table></figure></li>
<li>查看新project文件属性 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gec@ubuntu:&#x2F;mnt&#x2F;hgfs&#x2F;wydx&#x2F;01&#x2F;code$ file project</span><br><span class="line">project: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs), for GNU&#x2F;Linux 2.6.16, not stripped</span><br></pre></td></tr></table></figure>
 这里可以看到<code>ARM</code>，说明该project文件改为ARM架构，可以在ARM平台执行</li>
<li>使用tftp传输到开发板</li>
<li>修改权限 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC210 &#x2F;]# chmod 777 project</span><br></pre></td></tr></table></figure></li>
<li>再次执行<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC210 &#x2F;]# .&#x2F;project</span><br><span class="line">hello wydx!			---&gt; 成功执行</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<p>总结：<br>针对不同的平台需要使用不同的编译器<br><code>x86</code> —&gt; <code>gcc</code><br><code>ARM</code> —&gt; <code>arm-linux-gcc</code></p>
</blockquote>
<h3 id="安装交叉编译"><a href="#安装交叉编译" class="headerlink" title="安装交叉编译"></a>安装交叉编译</h3><ol>
<li>查看是否有已存在的<code>arm-linux-gcc</code> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc-linux-arm -v</span><br></pre></td></tr></table></figure></li>
<li>拷贝交叉编译工具的压缩包 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gec@ubuntu:&#x2F;mnt&#x2F;hgfs&#x2F;gz1828&#x2F;3-开发板使用&#x2F;day01$ cp arm-2009q3.tar.bz2 &#x2F;home&#x2F;gec&#x2F;</span><br></pre></td></tr></table></figure></li>
<li>解压到指定的目录下<code>/usr/local</code> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gec@ubuntu:~$ sudo tar jxvf arm-2009q3.tar.bz2 -C &#x2F;usr&#x2F;local&#x2F;</span><br></pre></td></tr></table></figure></li>
<li>找到<code>arm-linux-gcc</code>执行文件所在的路径<br> <code>/usr/local/arm-2009q3/bin</code></li>
<li>配置路径 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gec@ubuntu:~$ vim .bashrc</span><br><span class="line">&#x2F;&#x2F;在该文件的末尾增加以下代码:</span><br><span class="line">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;arm-2009q3&#x2F;bin</span><br></pre></td></tr></table></figure></li>
<li>设置配置生效 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source .bashrc		---&gt; 只对当前用户有效，如果切换到root用户，则无用</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：若不生效，重启终端<br><a href="https://tsuicyne.github.io/2019/06/19/BJ190619/#任何用户使用交叉编译">若要使在所有用户中生效</a></p>
</blockquote>
</li>
</ol>
<h1 id="文件IO"><a href="#文件IO" class="headerlink" title="文件IO"></a>文件IO</h1><h2 id="Linux文件"><a href="#Linux文件" class="headerlink" title="Linux文件"></a>Linux文件</h2><p><strong>在Linux中，一切皆文件</strong><br>普通文件：<code>.txt</code>、<code>.rar</code>、<code>.c</code>、<code>.ppt</code>等<br>设备文件：LCD屏幕<code>/dev/fb0</code>、触摸屏<code>/dev/input/event0</code>、LED灯、摄像头等</p>
<h2 id="相关函数"><a href="#相关函数" class="headerlink" title="相关函数"></a>相关函数</h2><h3 id="open"><a href="#open" class="headerlink" title="open"></a>open</h3><p>用于打开文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">头文件：</span><br><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line"></span><br><span class="line">函数体：</span><br><span class="line">int open(const char *pathname, int flags);</span><br><span class="line"></span><br><span class="line">参数：</span><br><span class="line">pathname：	文件的路径名</span><br><span class="line">flags：		打开文件的权限</span><br><span class="line">O_RDONLY, O_WRONLY, or O_RDWR</span><br><span class="line">只读	  只写      可读可写</span><br><span class="line"></span><br><span class="line">返回值：</span><br><span class="line">成功：新的文件描述符 &gt;&#x3D;0</span><br><span class="line">失败：-1</span><br></pre></td></tr></table></figure>

<h3 id="close"><a href="#close" class="headerlink" title="close"></a>close</h3><p>用于关闭文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">头文件：</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line"></span><br><span class="line">函数体：</span><br><span class="line">int close(int fd);</span><br><span class="line"></span><br><span class="line">参数：</span><br><span class="line">fd：文件描述符（open函数的返回值）</span><br><span class="line"></span><br><span class="line">返回值：</span><br><span class="line">成功：0</span><br><span class="line">失败：-1</span><br></pre></td></tr></table></figure>

<h3 id="read"><a href="#read" class="headerlink" title="read"></a>read</h3><p>用于读取文件数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">头文件：</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line"></span><br><span class="line">函数体：</span><br><span class="line">ssize_t read(int fd, void *buf, size_t count);</span><br><span class="line"></span><br><span class="line">参数：</span><br><span class="line">fd：	文件描述符（open函数的返回值）</span><br><span class="line">buf：	数据缓冲区</span><br><span class="line">count：	读取的字节数</span><br><span class="line"></span><br><span class="line">返回值：</span><br><span class="line">成功：返回已经读取到的字节数</span><br><span class="line">失败：-1</span><br></pre></td></tr></table></figure>

<h3 id="mmap"><a href="#mmap" class="headerlink" title="mmap"></a>mmap</h3><p>用于将磁盘文件的数据映射到内存,用户通过修改内存就能修改磁盘文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">头文件：</span><br><span class="line">#include &lt;sys&#x2F;mman.h&gt;</span><br><span class="line"></span><br><span class="line">函数体：</span><br><span class="line">void *mmap(void *addr, size_t length, int prot, int flags, int fd, off_t offset); </span><br><span class="line"></span><br><span class="line">参数：</span><br><span class="line">addr：	指定该内存地址来做为映射内存的首地址</span><br><span class="line">	直接传NULL，由内核来自动分配一个地址给用户</span><br><span class="line">length：映射内存的大小，如果成功，为4k倍数，</span><br><span class="line">	但是，直接根据自己需要大小来输入（文件的大小）</span><br><span class="line">	不能写零</span><br><span class="line">prot：	对映射内存的保护</span><br><span class="line">	PROT_EXEC  可执行权限.</span><br><span class="line">	PROT_READ  读权限.</span><br><span class="line">	PROT_WRITE 写权限.</span><br><span class="line">	PROT_NONE  不可以访问.</span><br><span class="line">	备注:open文件指定权限应该大于等于prot设置的权限</span><br><span class="line">flags：	设置该映射内存是否可见和是否同步到文件</span><br><span class="line">	MAP_SHARED：修改内存内容并且同步到文件，相当于对映射区域的写入数据会复制回文件内</span><br><span class="line">	MAP_PRIVATE：修改内存内容不同步到文件，相当于对映射区域的写入操作会产生一个映射文件的复制，</span><br><span class="line">fd：	要映射的文件描述符</span><br><span class="line">offset：映射内存的偏移设置</span><br><span class="line">	一般不设置偏移（0）	</span><br><span class="line">	如果要设置偏移，一定设置为4K整数倍</span><br><span class="line"></span><br><span class="line">返回值：</span><br><span class="line">成功：	返回已经读取到的字节数</span><br><span class="line">失败：	-1</span><br></pre></td></tr></table></figure>

<h3 id="munmap"><a href="#munmap" class="headerlink" title="munmap"></a>munmap</h3><p>用于解除内存映射</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">头文件：</span><br><span class="line">#include &lt;sys&#x2F;mman.h&gt;</span><br><span class="line"></span><br><span class="line">函数体：</span><br><span class="line">int munmap(void *addr, size_t length);</span><br><span class="line"></span><br><span class="line">参数：</span><br><span class="line">addr：	mmap返回值</span><br><span class="line">length：映射内存的大小 </span><br><span class="line"></span><br><span class="line">返回值：</span><br><span class="line">成功：	0</span><br><span class="line">失败：	-1</span><br></pre></td></tr></table></figure>

<h1 id="BMP刷图"><a href="#BMP刷图" class="headerlink" title="BMP刷图"></a>BMP刷图</h1><h2 id="相关知识"><a href="#相关知识" class="headerlink" title="相关知识"></a>相关知识</h2><p><strong>bmp格式（24位）</strong><br>参数：R G B<br>像素点：800×480<br>字节数：1152000（800×480×3）</p>
<p><strong>LCD屏幕</strong><br>设备文件：<code>/dev/fb0</code><br>参数：A R G B<br>像素点：800×480<br>字节数：1536000（800×480×4）</p>
<blockquote>
<p>注：查看LCD屏幕像素点为多少位</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC6818 ~]#cat &#x2F;sys&#x2F;class&#x2F;graphics&#x2F;fb0&#x2F;bits_per_pixel </span><br><span class="line">32		---&gt; 每个像素点：32位（4个字节） </span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h2><ol>
<li><p>利用open访问<code>example.bmp</code>图片文件及<code>/dev/fb0</code>LCD屏幕</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lcd_fd &#x3D; open(&quot;&#x2F;dev&#x2F;fb0&quot;,O_WRONLY);</span><br><span class="line">bmp_fd &#x3D; open(&quot;example.bmp&quot;,O_RDONLY);</span><br></pre></td></tr></table></figure></li>
<li><p>利用read读取<code>example.bmp</code>图片数据<br> <strong>缓冲区定义</strong><br> 缓冲区定义大小取决于图片总字节数，如这里是24位bmp图片，即图片的每个像素点24位，每个像素点3个字节，共有800×480×3字节</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">char buf[800*480*3]</span><br></pre></td></tr></table></figure>

<p> <strong>BMP图片储存时，像素点的颜色排布？</strong><br> B G R</p>
</li>
<li><p>利用write或mmap写入buf数据到LCD屏幕<br> <strong>图片只刷了4分之3？</strong><br> 只写了1152000（800×480×3）字节，但是LCD屏幕共1536000（800×480×4）字节</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">write(lcd,bmp_buf,800*480*3);</span><br></pre></td></tr></table></figure>

<p> <strong>图片只会显示黑白两色？</strong><br> 图像像素点错乱</p>
<p> <strong>图片右边某些字节显示在LCD屏幕左边</strong><br> 图片理论大小：1152000<br> 图片实际大小：1152054</p>
 
<p> 多出54字节为文件属性信息,要先跳过这部分头数据，再读取图片的像素点数据<br> 利用lseek偏移</p>
<p> <strong>图片显示上下颠倒左右不颠倒</strong><br> BMP图片存储时，左下方为第一个字节</p>
</li>
<li><p>利用close关闭LCD屏幕与图片资源</p>
</li>
</ol>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>格式示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bmp_buf: BGR xxx xxx xxx</span><br><span class="line">LCD_buf: xRGB xxxx  xxxx  xxxx</span><br><span class="line"></span><br><span class="line">	0000  0000  0000  0000  0000  0000  0000 0000</span><br><span class="line"></span><br><span class="line">				      B:    1010 1101 		</span><br><span class="line">		   	  G:    1011  1101</span><br><span class="line"> 	      R:    1101  1010</span><br><span class="line">---------------------------------------------------------</span><br><span class="line">	0000  0000  1101  1010  1011  1101  1010 1101</span><br></pre></td></tr></table></figure>
<p>示例程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;mman.h&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;打开文件</span><br><span class="line">	int bmp_fd &#x3D; open(&quot;.&#x2F;example.bmp&quot;,O_RDWR);</span><br><span class="line">	int lcd_fd &#x3D; open(&quot;&#x2F;dev&#x2F;fb0&quot;,O_RDWR);</span><br><span class="line">	&#x2F;&#x2F;判断文件打开是否成功</span><br><span class="line">	if(-1 &#x3D;&#x3D; lcd_fd &amp;&amp; -1 &#x3D;&#x3D; bmp_fd)</span><br><span class="line">	&#123;</span><br><span class="line">		printf(&quot;open error!\n&quot;);</span><br><span class="line">		return -1;</span><br><span class="line">	&#125;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		printf(&quot;open success!\n&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;准备存放映射内存地址的指针</span><br><span class="line">	int *lcd_addr;</span><br><span class="line">	&#x2F;&#x2F;映射LCD屏幕设备文件到内存中</span><br><span class="line">	lcd_addr &#x3D; mmap(NULL,			&#x2F;&#x2F;映射区开始地址，NULL为系统自动分配</span><br><span class="line">			800*480*4,		&#x2F;&#x2F;映射区长度（大小&#x2F;字节）</span><br><span class="line">			PROT_READ|PROT_WRITE,	&#x2F;&#x2F;内容可以被读取和写入</span><br><span class="line">			MAP_SHARED,		&#x2F;&#x2F;共享内存</span><br><span class="line">			lcd_fd,			&#x2F;&#x2F;有效的文件描述符</span><br><span class="line">			0);			&#x2F;&#x2F;被映射对象的内容起点</span><br><span class="line">	&#x2F;&#x2F;偏移54个头数据</span><br><span class="line">	lseek(bmp_fd,54,SEEK_SET);</span><br><span class="line">	&#x2F;&#x2F;读取BMP图片数据</span><br><span class="line">	char bmp_buf[800*480*3];</span><br><span class="line">	read(bmp_fd,bmp_buf,800*480*3);		&#x2F;&#x2F;一次性读取完全部数据</span><br><span class="line">	&#x2F;&#x2F;将图像上下翻转</span><br><span class="line">	int x,y;</span><br><span class="line">	for(y&#x3D;0; y&lt;480; y++)</span><br><span class="line">	&#123;</span><br><span class="line">		for(x&#x3D;0; x&lt;800; x++)</span><br><span class="line">		&#123;</span><br><span class="line">			lcd_addr[(479-y)*800+x] &#x3D; bmp_buf[(y*800+x)*3]&lt;&lt;0|bmp_buf[(y*800+x)*3+1]&lt;&lt;8|bmp_buf[(y*800+x)*3+2]&lt;&lt;16;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">	&#x2F;&#x2F;关闭文件</span><br><span class="line">	close(lcd_fd);</span><br><span class="line">	close(bmp_fd);</span><br><span class="line">	&#x2F;&#x2F;解除映射</span><br><span class="line">	munmap(lcd_addr,800*480*4);</span><br><span class="line">	</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="触屏实现"><a href="#触屏实现" class="headerlink" title="触屏实现"></a>触屏实现</h1><h2 id="相关知识-1"><a href="#相关知识-1" class="headerlink" title="相关知识"></a>相关知识</h2><p><strong>触摸屏</strong><br>设备文件：<code>/dev/input/event0</code></p>
<p><strong>什么是事件？</strong><br>当某些硬件设备接入第三方平台，这些硬件设备的状态发生改变时，就称之为事件的发生<br>如：<br>触摸屏被滑动了一下<br>键盘的A键被摁下去，弹上来<br>鼠标的左键被摁下去</p>
<p><strong>什么叫输入子系统？</strong><br>分析板子中的数据，转换成有意义的值（事件的类型、值）</p>
<h2 id="实现思路-1"><a href="#实现思路-1" class="headerlink" title="实现思路"></a>实现思路</h2><ol>
<li><p>利用open访问触摸屏文件</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open(&quot;&#x2F;dev&#x2F;input&#x2F;event0&quot;,O_RDONLY);</span><br></pre></td></tr></table></figure></li>
<li><p>利用read读取文件的数据</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">read(fd,buf,sizeof(buf));</span><br></pre></td></tr></table></figure>
<p> <strong>buf是什么类型的缓冲区？</strong><br> buf的数据与输入子系统分析出来的数据类型是一致，由于输入子系统在内核中，所以类型由系统来决定，定义在Linux下的一个头文件中</p>
<p> <strong>头文件在哪里？</strong><br> Ubuntu：<code>/usr/include/linux/input.h</code><br> 在工程中包含这个头文件时<code>#include &lt;linux/input.h&gt;</code>，Linux默认在<code>/usr/include</code>中寻找头文件</p>
<p> <strong>当发生一个事件时，输入子系统就会分析出一个事件结构体</strong></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">struct input_event &#123;</span><br><span class="line">	struct timeval time;</span><br><span class="line">	__u16 type;</span><br><span class="line">	__u16 code;</span><br><span class="line">	__s32 value;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p> 结论：buf类型是一个结构体</p>
<p> <strong>分析input_event结构体</strong></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">struct timeval time;	---&gt;	事件发生时间</span><br><span class="line">__u16 type;		---&gt;	事件类型（鼠标事件，键盘事件，触摸屏事件）</span><br><span class="line">	</span><br><span class="line">	#define EV_KEY			0x01	---&gt;	键盘事件</span><br><span class="line">	#define EV_REL			0x02	---&gt;	鼠标事件</span><br><span class="line">	#define EV_ABS			0x03	---&gt;	触摸屏事件</span><br><span class="line">	</span><br><span class="line">__u16 code;		---&gt;	对事件进一步描述</span><br><span class="line">	</span><br><span class="line">	#define ABS_X			0x00	---&gt;	触摸屏的X轴			</span><br><span class="line">	#define ABS_Y			0x01	---&gt;	触摸屏的Y轴</span><br><span class="line">	#define ABS_PRESSURE		0x18	---&gt;	触摸屏的压力值</span><br><span class="line">	#define BTN_TOUCH		0x14a	---&gt;	触摸屏的触摸</span><br><span class="line">				</span><br><span class="line">__s32 value;		---&gt;	事件值</span><br><span class="line">	ABS_X					---&gt;	范围：0-800</span><br><span class="line">	ABS_Y					---&gt;	范围：0-480</span><br><span class="line">	ABS_PRESSURE				---&gt;	松开：0	按下：200&#x2F;250&#x2F;255&#x2F;330</span><br></pre></td></tr></table></figure></li>
<li><p>判断数据是否是自己想要读取的类型</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;松手判断</span><br><span class="line">if(buf.type &#x3D;&#x3D; EV_ABS &amp;&amp; buf.code &#x3D;&#x3D; ABS_PRESSURE &amp;&amp; buf.value &#x3D;&#x3D; 0)</span><br></pre></td></tr></table></figure></li>
<li><p>利用close关闭文件</p>
</li>
</ol>
<h2 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h2><p>示例程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;sys&#x2F;types.h&gt;</span><br><span class="line">#include &lt;sys&#x2F;stat.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;linux&#x2F;input.h&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	&#x2F;&#x2F;访问触摸屏文件</span><br><span class="line">	int ts_fd &#x3D; open(&quot;&#x2F;dev&#x2F;input&#x2F;event0&quot;,O_RDONLY);</span><br><span class="line">	&#x2F;&#x2F;读取文件的数据</span><br><span class="line">	&#x2F;&#x2F;定义缓冲区</span><br><span class="line">	struct input_event buf;</span><br><span class="line">	</span><br><span class="line">	int x,y;</span><br><span class="line">	&#x2F;&#x2F;输出buf的数据</span><br><span class="line">	while(1)</span><br><span class="line">	&#123;</span><br><span class="line">		read(ts_fd,&amp;buf,sizeof(buf));</span><br><span class="line">		if(buf.type &#x3D;&#x3D; EV_ABS &amp;&amp; buf.code &#x3D;&#x3D; ABS_X)</span><br><span class="line">		&#123;</span><br><span class="line">			x &#x3D; buf.value;</span><br><span class="line">		&#125;</span><br><span class="line">		if(buf.type &#x3D;&#x3D; EV_ABS &amp;&amp; buf.code &#x3D;&#x3D; ABS_Y)</span><br><span class="line">		&#123;</span><br><span class="line">			y &#x3D; buf.value;</span><br><span class="line">		&#125;</span><br><span class="line">		if(buf.type &#x3D;&#x3D; EV_KEY &amp;&amp; buf.code &#x3D;&#x3D; BTN_TOUCH &amp;&amp; buf.value &#x3D;&#x3D; 0)</span><br><span class="line">		&#123;</span><br><span class="line">			printf(&quot;x&#x3D;%d,y&#x3D;%d\n&quot;,x,y);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="语音识别"><a href="#语音识别" class="headerlink" title="语音识别"></a>语音识别</h1><h2 id="ALSA是什么"><a href="#ALSA是什么" class="headerlink" title="ALSA是什么"></a>ALSA是什么</h2><p>ALSA是Advanced Linux Sound Architecture的缩写，高级Linux声音架构的简称,它在Linux操作系统上提供了音频和MIDI（Musical Instrument Digital Interface，音乐设备数字化接口）的支持。</p>
<h2 id="ALSA库移植"><a href="#ALSA库移植" class="headerlink" title="ALSA库移植"></a>ALSA库移植</h2><p>交叉编译<code>alsa-lib-1.0.22.tar.bz2</code>与<code>alsa-utils-1.0.22.tar.bz2</code></p>
<p><strong>alsa-lib-1.0.22.tar.bz2</strong></p>
<ol>
<li>回到库所在的路径 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;mnt&#x2F;hgfs&#x2F;05 语音识别&#x2F;code&#x2F;ALSA</span><br></pre></td></tr></table></figure></li>
<li>解压到~目录 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar jxvf alsa-lib-1.0.22.tar.bz2 -C ~</span><br></pre></td></tr></table></figure></li>
<li>在家目录中创建安装目录，并给权限 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;home&#x2F;gec&#x2F;alsa&#x2F;</span><br><span class="line">chmod 777 &#x2F;home&#x2F;gec&#x2F;alsa</span><br></pre></td></tr></table></figure></li>
<li>进入库解压后所在的目录下 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;home&#x2F;gec&#x2F;alsa-lib-1.0.22</span><br></pre></td></tr></table></figure></li>
<li>配置 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --host&#x3D;arm-linux --prefix&#x3D;&#x2F;home&#x2F;gec&#x2F;alsa --disable-python</span><br></pre></td></tr></table></figure></li>
<li>编译 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure></li>
<li>安装 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make install</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><strong>alsa-utils-1.0.22.tar.bz2</strong></p>
<ol>
<li>回到库所在的路径 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;mnt&#x2F;hgfs&#x2F;05 语音识别&#x2F;code&#x2F;ALSA</span><br></pre></td></tr></table></figure></li>
<li>解压到~目录 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar jxvf alsa-utils-1.0.22.tar.bz2 -C ~</span><br></pre></td></tr></table></figure></li>
<li>进入库解压后所在的目录下 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;home&#x2F;gec&#x2F;alsa-utils-1.0.22</span><br></pre></td></tr></table></figure></li>
<li>配置 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --host&#x3D;arm-linux --prefix&#x3D;&#x2F;home&#x2F;gec&#x2F;alsa --with-alsa-prefix&#x3D;&#x2F;home&#x2F;gec&#x2F;alsa&#x2F;lib --with-alsa-inc-prefix&#x3D;&#x2F;home&#x2F;gec&#x2F;alsa&#x2F;include --disable-alsamixer --disable-xmlto</span><br></pre></td></tr></table></figure></li>
<li>编译 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#出现错误1</span><br><span class="line">make[2]: Entering directory &#96;&#x2F;home&#x2F;gec&#x2F;alsa-utils-1.0.22&#x2F;alsaconf&#x2F;po&#39;</span><br><span class="line">mv: cannot stat &#96;t-ja.gmo&#39;: No such file or directory</span><br><span class="line">make[2]: *** [ja.gmo] Error 1</span><br><span class="line">#解决方案</span><br><span class="line">&#x2F;&#x2F;在&#x2F;home&#x2F;gec&#x2F;alsa-utils-1.0.22&#x2F;alsaconf&#x2F;po创建t-ja.gmo文件</span><br><span class="line">touch alsaconf&#x2F;po&#x2F;t-ja.gmo</span><br><span class="line">&#x2F;&#x2F;重新编译</span><br><span class="line">make</span><br><span class="line"></span><br><span class="line">#出现错误2</span><br><span class="line">make[2]: Entering directory &#96;&#x2F;home&#x2F;gec&#x2F;alsa-utils-1.0.22&#x2F;alsaconf&#x2F;po&#39;</span><br><span class="line">mv: cannot stat &#96;t-ru.gmo&#39;: No such file or directory</span><br><span class="line">make[2]: *** [ru.gmo] Error 1</span><br><span class="line">#解决方案</span><br><span class="line">&#x2F;&#x2F;在&#x2F;home&#x2F;gec&#x2F;alsa-utils-1.0.22&#x2F;alsaconf&#x2F;po创建t-ru.gmo文件</span><br><span class="line">touch alsaconf&#x2F;po&#x2F;t-ru.gmo</span><br><span class="line">&#x2F;&#x2F;重新编译</span><br><span class="line">make</span><br><span class="line">&#x2F;&#x2F;安装</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="ALSA库放置到开发板"><a href="#ALSA库放置到开发板" class="headerlink" title="ALSA库放置到开发板"></a>ALSA库放置到开发板</h2><ol>
<li>在Ubuntu先回到移植好的ALSA库所在的路径 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br></pre></td></tr></table></figure></li>
<li>压缩移植好的ALSA库 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zcvf alsa.tar.gz alsa&#x2F;</span><br></pre></td></tr></table></figure></li>
<li>把ALSA库的压缩包拷贝到共享目录 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp alsa.tar.gz &#x2F;mnt&#x2F;hgfs&#x2F;wydx&#x2F;13\ 语音识别&#x2F;code&#x2F;ALSA&#x2F;</span><br></pre></td></tr></table></figure></li>
<li>把<code>alsa.tar.gz</code>下载开发板中</li>
<li>在开发板中解压<code>alsa.tar.gz</code> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf alsa.tar.gz</span><br></pre></td></tr></table></figure></li>
<li>分析ALSA库的文件<br> <code>/alsa/bin</code>：可执行文件<br> <code>/alsa/lib</code>：库文件</li>
<li>添加永久性的环境变量<br> 打开板子的脚本文件 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>
 在文件的中间添加一下的内容 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export LD_LIBRARY_PATH&#x3D;&#x2F;alsa&#x2F;lib:$LD_LIBRARY_PATH                          </span><br><span class="line">export PATH&#x3D;$PATH:&#x2F;alsa&#x2F;bin</span><br></pre></td></tr></table></figure>
 生效该脚本文件 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>
 查看环境变量 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env</span><br></pre></td></tr></table></figure></li>
<li>指定ALSA库的配置文件<br> 将<code>/alsa/share/alsa/</code>拷贝到<code>/usr/share/</code> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp &#x2F;alsa&#x2F;share&#x2F;alsa&#x2F; &#x2F;usr&#x2F;share&#x2F; -r</span><br></pre></td></tr></table></figure>
 将<code>/alsa</code>拷贝到<code>/home/gec/</code> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp &#x2F;alsa &#x2F;home&#x2F;gec&#x2F; -rf		---&gt; 如果&#x2F;home&#x2F;gec不存在，则需要创建</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="注册设备节点文件"><a href="#注册设备节点文件" class="headerlink" title="注册设备节点文件"></a>注册设备节点文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;注册依赖的设备文件节点</span><br><span class="line">mkdir &#x2F;dev&#x2F;snd</span><br><span class="line">cd &#x2F;dev&#x2F;snd</span><br><span class="line">&#x2F;&#x2F;创建某个设备节点</span><br><span class="line">mknod dsp c 14 3	</span><br><span class="line">mknod audio c 14 4</span><br><span class="line">mknod mixer c 14 0</span><br><span class="line">mknod controlC0 c 116 0</span><br><span class="line">mknod seq c 116 1</span><br><span class="line">mknod pcmC0D0c c 116 24</span><br><span class="line">mknod pcmC0D0p c 116 16</span><br><span class="line">mknod pcmC0D1c c 116 25</span><br><span class="line">mknod pcmC0D1p c 116 17</span><br><span class="line">mknod timer c 116 33</span><br></pre></td></tr></table></figure>

<h2 id="录音与播放测试"><a href="#录音与播放测试" class="headerlink" title="录音与播放测试"></a>录音与播放测试</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;alsa&#x2F;bin	---&gt; arecord	录音</span><br><span class="line">&#x2F;alsa&#x2F;bin	---&gt; aplay	播放</span><br></pre></td></tr></table></figure>

<p><strong>录音：arecord</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC210 &#x2F;]arecord -d3 -c1 -r16000 -twav -fS16_LE abc.wav</span><br><span class="line">Recording WAVE &#39;abc.wav&#39; : Signed 16 bit Little Endian, Rate 16000 Hz, Mono		---&gt; 正在录音</span><br><span class="line"></span><br><span class="line">参数：</span><br><span class="line">-d, --duration&#x3D;#        interrupt after # seconds		---&gt; 录音的秒数</span><br><span class="line">-c, --channels&#x3D;#        channels				---&gt; 音轨</span><br><span class="line">-r, --rate&#x3D;#            sample rate				---&gt; 采样频率</span><br><span class="line">-t, --file-type TYPE    file type (voc, wav, raw or au)		---&gt; 封装的格式</span><br><span class="line">-f, --format&#x3D;FORMAT     sample format (case insensitive)	---&gt; 量化位数</span><br></pre></td></tr></table></figure>

<p><strong>播放：aplay</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC210 &#x2F;]aplay abc.wav </span><br><span class="line">Playing WAVE &#39;abc.wav&#39; : Signed 16 bit Little Endian, Rate 16000 Hz, Mono		---&gt; 正在播放</span><br></pre></td></tr></table></figure>

<h2 id="语音的识别"><a href="#语音的识别" class="headerlink" title="语音的识别"></a>语音的识别</h2><p>该语音识别基于科大讯飞开源库</p>
<h3 id="文件说明"><a href="#文件说明" class="headerlink" title="文件说明"></a>文件说明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">F:\05 语音识别\code\robot_project		---&gt; 科大讯飞SDK原生包</span><br><span class="line">	gec210&#x2F;</span><br><span class="line">		inc&#x2F; :210工程中使用函数的头文件</span><br><span class="line">		lib&#x2F; :210工程中使用的库文件</span><br><span class="line">		voicectl.c: 开发板端控制的源码</span><br><span class="line">	x86&#x2F;</span><br><span class="line">		bin&#x2F;</span><br><span class="line">			msc&#x2F;  ---&gt; 识别的记录文件</span><br><span class="line">			pcm&#x2F;  ---&gt; 识别的音频文件</span><br><span class="line">			asr_record_demo  ---&gt; 可执行文件</span><br><span class="line">			cmd.bnf  ---&gt; 识别的语法文件</span><br><span class="line">			result.xml：SDK识别的结果存档</span><br><span class="line">		example&#x2F;</span><br><span class="line">			asr_record_demo：SDK的例程</span><br><span class="line">		lib&#x2F;</span><br><span class="line">			SDK的识别库	</span><br><span class="line">		BNF语法手册.pdf</span><br><span class="line">	Makefile：工程管理文件，用于编译程序</span><br></pre></td></tr></table></figure>

<h3 id="分析SDK例程"><a href="#分析SDK例程" class="headerlink" title="分析SDK例程"></a>分析SDK例程</h3><p>例程源码：<code>F:\05 语音识别\code\robot_project\x86\examples\asr_record_demo\asr_record_demo.c</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;登录账号</span><br><span class="line">	MSPLogin();</span><br><span class="line">&#x2F;&#x2F;构建语法网络</span><br><span class="line">	build_grammar();				---&gt; 加载x86&#x2F;bin&#x2F;cmd.bnf语法</span><br><span class="line">&#x2F;&#x2F;开始识别</span><br><span class="line">	run_asr();</span><br><span class="line">		&#x2F;&#x2F;与开发板端建立连接</span><br><span class="line">			init_sock();</span><br><span class="line">				socket();		---&gt; 建立未连接套接字</span><br><span class="line">				bind();			---&gt; 绑定IP地址作为服务器  192.168.0.102</span><br><span class="line">				listen();		---&gt; 把未连接套接字设置为监听套接字</span><br><span class="line">				accept();		---&gt; 接受对方的连接   ---&gt; 得到已连接套接字</span><br><span class="line">		&#x2F;&#x2F;获取音频文件</span><br><span class="line">			get_audio_file();</span><br><span class="line">		&#x2F;&#x2F;分析音频文件</span><br><span class="line">			demo_file(&quot;pcm&#x2F;cmd.pcm&quot;);</span><br><span class="line">			struct speech_rec_notifier recnotifier &#x3D;</span><br><span class="line">			&#123;</span><br><span class="line">				on_result,		---&gt; 识别的结果</span><br><span class="line">				on_speech_begin,	---&gt; 开始下一次的识别</span><br><span class="line">				on_speech_end		---&gt; 识别结束</span><br><span class="line">			&#125;;		</span><br><span class="line">		&#x2F;&#x2F;初始化引擎语法</span><br><span class="line">			sr_init();</span><br><span class="line">		&#x2F;&#x2F;把音频传入引擎中，进行识别</span><br><span class="line">			sr_start_listening();</span><br><span class="line">		&#x2F;&#x2F;不断进行识别</span><br><span class="line">			sr_write_audio_data();</span><br><span class="line">		&#x2F;&#x2F;识别完毕，把结果存在on_result</span><br><span class="line">			sr_stop_listening();</span><br></pre></td></tr></table></figure>

<h3 id="使用SDK原生包"><a href="#使用SDK原生包" class="headerlink" title="使用SDK原生包"></a>使用SDK原生包</h3><ol>
<li>修改语法<br> 语法文件：<code>F:\05 语音识别\code\robot_project\x86\bin\cmd.bnf</code></li>
<li>编译SDK <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;mnt&#x2F;hgfs&#x2F;05 语音识别&#x2F;code&#x2F;robot_project</span><br><span class="line">make</span><br></pre></td></tr></table></figure></li>
<li>切换可执行文件的路径下 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;mnt&#x2F;hgfs&#x2F;05 语音识别&#x2F;code&#x2F;robot_project&#x2F;x86&#x2F;bin</span><br><span class="line">.&#x2F;asr_record_demo</span><br><span class="line">构建离线识别语法网络...</span><br><span class="line">构建语法失败！11212		---&gt; 当前的时间不在SDK的试用日期内</span><br><span class="line">语音识别完毕.</span><br></pre></td></tr></table></figure></li>
<li>修改Ubuntu日期为<code>2016.12.15</code></li>
<li>再次执行文件 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;asr_record_demo</span><br><span class="line">构建离线识别语法网络...</span><br><span class="line">构建语法成功！ 语法ID:cmd</span><br><span class="line">离线识别语法网络构建完成，开始识别...</span><br><span class="line">wait for connecting ...</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="分析GEC210源码"><a href="#分析GEC210源码" class="headerlink" title="分析GEC210源码"></a>分析GEC210源码</h3><p>源码路径：<code>F:\05 语音识别\code\robot_project\gec210\voicectl.c</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;与服务器之间建立连接</span><br><span class="line">	init_sock();</span><br><span class="line">&#x2F;&#x2F;输入一个数字，在3秒内录音</span><br><span class="line">	printf(&quot;input num to start REC in 3s...\n&quot;);</span><br><span class="line">	scanf(&quot;%d&quot;,&amp;num);</span><br><span class="line">	system(&quot;arecord -d3 -c1 -r16000 -traw -fS16_LE cmd.pcm&quot;);		---&gt; 录音</span><br><span class="line">&#x2F;&#x2F;把音频文件通过网络传输到服务器上</span><br><span class="line">	send_pcm(sockfd, PCM_FILE);</span><br><span class="line">&#x2F;&#x2F;等待结果（ID）</span><br><span class="line">	xmlChar *id &#x3D; wait4id(sockfd);</span><br><span class="line">&#x2F;&#x2F;将字符串的id转化成为整形的id</span><br><span class="line">	id_num&#x3D;atoi((char *)id);</span><br><span class="line">&#x2F;&#x2F;判断ID</span><br><span class="line">	if(id_num &#x3D;&#x3D; 999)</span><br><span class="line">	&#123;</span><br><span class="line">		printf(&quot;bye-bye!\n&quot;);	</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用GEC210源码"><a href="#使用GEC210源码" class="headerlink" title="使用GEC210源码"></a>使用GEC210源码</h3><ol>
<li>配置Ubuntu的IP地址 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ifconfig eth0 172.16.17.202</span><br></pre></td></tr></table></figure></li>
<li>确保开发板与Ubuntu之间是连通 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">本次测试IP：</span><br><span class="line">GEC6818-IP：172.16.17.201</span><br><span class="line">Ubuntu-IP：172.16.17.202</span><br></pre></td></tr></table></figure></li>
<li>切换到工程管理文件所在的路径 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;mnt&#x2F;hgfs&#x2F;05 语音识别&#x2F;code&#x2F;robot_project&#x2F;</span><br></pre></td></tr></table></figure></li>
<li>编译 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure></li>
<li>把<code>/mnt/hgfs/05 语音识别/code/robot_project/gec210</code>下的<code>voicectl</code>下载到开发板中</li>
<li>把<code>F:\05 语音识别\code\robot_project\gec210\lib</code>全部库文件下载开发板中的<code>/lib</code></li>
<li>在Ubuntu中执行<code>/05 语音识别/code/robot_project/x86/bin/asr_record_demo</code> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;asr_record_demo</span><br><span class="line">构建离线识别语法网络...</span><br><span class="line">构建语法成功！ 语法ID:cmd</span><br><span class="line">离线识别语法网络构建完成，开始识别...</span><br><span class="line">wait for connecting ...</span><br></pre></td></tr></table></figure></li>
<li>开发板执行<code>voicectl</code>，后面加上语音识别引擎服务器IP（Ubuntu-IP） <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;voicectl 172.16.17.202</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="附"><a href="#附" class="headerlink" title="附"></a>附</h1><h2 id="修改默认路径"><a href="#修改默认路径" class="headerlink" title="修改默认路径"></a>修改默认路径</h2><ol>
<li>通过vi工具打开系统配置文件 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC6818 &#x2F;IOT]#vi &#x2F;etc&#x2F;profile	---&gt; 开发板在启动过程中，会执行该配置文件</span><br></pre></td></tr></table></figure></li>
<li>在该文件中找到以下两行代码 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;IOT					---&gt; 进入&#x2F;IOT命令</span><br><span class="line">.&#x2F;iot					---&gt; 执行iot程序，默认程序是一个 QT程序</span><br><span class="line">&#x2F;&#x2F;把这两个命令增加注释：&#96;#&#96;，修改如下：</span><br><span class="line">#cd &#x2F;IOT</span><br><span class="line">#.&#x2F;iot					---&gt; 注释该命令，开发板启动完成后，界面显示企业Logo界面，在该文件中可以设置开机自启动程序</span><br><span class="line">&#x2F;&#x2F;修改完成，&#96;:wq&#96;，保存退出</span><br></pre></td></tr></table></figure></li>
<li>通过reboot重启开发板，使得配置生效 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">reboot					---&gt; 重启开发板，该命令只对Linux系统有效	</span><br><span class="line">[    4.586000] usbcore: registered new interface driver rtl8723bu</span><br><span class="line">[root@GEC6818 &#x2F;]#</span><br><span class="line">[root@GEC6818 &#x2F;]#ls</span><br><span class="line">IOT         driver      linuxrc     proc        sbin        usr</span><br><span class="line">bin         etc         lost+found  root        sys         var</span><br><span class="line">dev         lib         mnt         run         tmp</span><br><span class="line"></span><br><span class="line">[GEC6818] ---&gt; uboot系统，对reboot失效，需要使用reset来进行开发板重启</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="任何用户使用交叉编译"><a href="#任何用户使用交叉编译" class="headerlink" title="任何用户使用交叉编译"></a>任何用户使用交叉编译</h2><ol>
<li>通过vi工具打开系统配置文件 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gec@ubuntu:~$ vi &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure></li>
<li>在该文件中末尾增加以下代码 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;arm-2009q3&#x2F;bin</span><br></pre></td></tr></table></figure></li>
<li>让设置生效 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gec@ubuntu:~$ source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="查看硬盘空间大小"><a href="#查看硬盘空间大小" class="headerlink" title="查看硬盘空间大小"></a>查看硬盘空间大小</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@GEC6818 &#x2F;]#df -h</span><br><span class="line">Filesystem                Size      Used Available Use% Mounted on</span><br><span class="line">&#x2F;dev&#x2F;root               492.1M    290.7M    201.4M  59% &#x2F;</span><br><span class="line">devtmpfs                396.1M         0    396.1M   0% &#x2F;dev</span><br><span class="line">tmpfs                   404.2M         0    404.2M   0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs                   404.2M         0    404.2M   0% &#x2F;tmp</span><br><span class="line">tmpfs                   404.2M         0    404.2M   0% &#x2F;run</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：若在传输文件过程中出现<code>tftp write error</code>，则可能是空间不足</p>
</blockquote>
<h1 id="编辑日志"><a href="#编辑日志" class="headerlink" title="编辑日志"></a>编辑日志</h1><p><strong>19/06/22</strong><br>1.修复文章超链接失效问题</p>
<p><strong>19/07/05</strong><br>1.完善文章后续章节</p>
<p><strong>19/07/06</strong><br>1.完善文章摘要部分</p>
<p><strong>20/01/21</strong><br>1.调整文章编码位置</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://tsuicyne.github.io/BJ190619/" title="基于Cortex-A53的语音识别系统">https://tsuicyne.github.io/BJ190619/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请务必注明出处
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Ubuntu/" rel="tag"># Ubuntu</a>
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/C/" rel="tag"># C</a>
              <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" rel="tag"># 嵌入式</a>
              <a href="/tags/%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%AB/" rel="tag"># 语音识别</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/BJ190524/" rel="prev" title="激光电子打靶系统实现算法">
      <i class="fa fa-chevron-left"></i> 激光电子打靶系统实现算法
    </a></div>
      <div class="post-nav-item">
    <a href="/JC190910/" rel="next" title="KeePass：密码管理器使用配置指南">
      KeePass：密码管理器使用配置指南 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          目录
        </li>
        <li class="sidebar-nav-overview">
          概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#硬件环境"><span class="nav-number">1.</span> <span class="nav-text">硬件环境</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#开发平台-GEC6818"><span class="nav-number">1.1.</span> <span class="nav-text">开发平台 GEC6818</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#处理芯片-S5P6818"><span class="nav-number">1.2.</span> <span class="nav-text">处理芯片 S5P6818</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#操作系统烧写"><span class="nav-number">2.</span> <span class="nav-text">操作系统烧写</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux环境搭建"><span class="nav-number">3.</span> <span class="nav-text">Linux环境搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#开机过程"><span class="nav-number">3.1.</span> <span class="nav-text">开机过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#加载引导"><span class="nav-number">3.1.1.</span> <span class="nav-text">加载引导</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#加载内核"><span class="nav-number">3.1.2.</span> <span class="nav-text">加载内核</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#挂载文件系统"><span class="nav-number">3.1.3.</span> <span class="nav-text">挂载文件系统</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#连接PC"><span class="nav-number">3.2.</span> <span class="nav-text">连接PC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#传输文件"><span class="nav-number">3.3.</span> <span class="nav-text">传输文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#串口传输文件"><span class="nav-number">3.3.1.</span> <span class="nav-text">串口传输文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网线传输文件"><span class="nav-number">3.3.2.</span> <span class="nav-text">网线传输文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#U盘传输文件"><span class="nav-number">3.3.3.</span> <span class="nav-text">U盘传输文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#交叉编译"><span class="nav-number">3.4.</span> <span class="nav-text">交叉编译</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#交叉编译作用"><span class="nav-number">3.4.1.</span> <span class="nav-text">交叉编译作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装交叉编译"><span class="nav-number">3.4.2.</span> <span class="nav-text">安装交叉编译</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件IO"><span class="nav-number">4.</span> <span class="nav-text">文件IO</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux文件"><span class="nav-number">4.1.</span> <span class="nav-text">Linux文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#相关函数"><span class="nav-number">4.2.</span> <span class="nav-text">相关函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#open"><span class="nav-number">4.2.1.</span> <span class="nav-text">open</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#close"><span class="nav-number">4.2.2.</span> <span class="nav-text">close</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#read"><span class="nav-number">4.2.3.</span> <span class="nav-text">read</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mmap"><span class="nav-number">4.2.4.</span> <span class="nav-text">mmap</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#munmap"><span class="nav-number">4.2.5.</span> <span class="nav-text">munmap</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BMP刷图"><span class="nav-number">5.</span> <span class="nav-text">BMP刷图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#相关知识"><span class="nav-number">5.1.</span> <span class="nav-text">相关知识</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实现思路"><span class="nav-number">5.2.</span> <span class="nav-text">实现思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#示例"><span class="nav-number">5.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#触屏实现"><span class="nav-number">6.</span> <span class="nav-text">触屏实现</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#相关知识-1"><span class="nav-number">6.1.</span> <span class="nav-text">相关知识</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实现思路-1"><span class="nav-number">6.2.</span> <span class="nav-text">实现思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#示例-1"><span class="nav-number">6.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#语音识别"><span class="nav-number">7.</span> <span class="nav-text">语音识别</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ALSA是什么"><span class="nav-number">7.1.</span> <span class="nav-text">ALSA是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ALSA库移植"><span class="nav-number">7.2.</span> <span class="nav-text">ALSA库移植</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ALSA库放置到开发板"><span class="nav-number">7.3.</span> <span class="nav-text">ALSA库放置到开发板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注册设备节点文件"><span class="nav-number">7.4.</span> <span class="nav-text">注册设备节点文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#录音与播放测试"><span class="nav-number">7.5.</span> <span class="nav-text">录音与播放测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#语音的识别"><span class="nav-number">7.6.</span> <span class="nav-text">语音的识别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#文件说明"><span class="nav-number">7.6.1.</span> <span class="nav-text">文件说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分析SDK例程"><span class="nav-number">7.6.2.</span> <span class="nav-text">分析SDK例程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用SDK原生包"><span class="nav-number">7.6.3.</span> <span class="nav-text">使用SDK原生包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分析GEC210源码"><span class="nav-number">7.6.4.</span> <span class="nav-text">分析GEC210源码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用GEC210源码"><span class="nav-number">7.6.5.</span> <span class="nav-text">使用GEC210源码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#附"><span class="nav-number">8.</span> <span class="nav-text">附</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#修改默认路径"><span class="nav-number">8.1.</span> <span class="nav-text">修改默认路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#任何用户使用交叉编译"><span class="nav-number">8.2.</span> <span class="nav-text">任何用户使用交叉编译</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看硬盘空间大小"><span class="nav-number">8.3.</span> <span class="nav-text">查看硬盘空间大小</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编辑日志"><span class="nav-number">9.</span> <span class="nav-text">编辑日志</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="TsuiCyne"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">TsuiCyne</p>
  <div class="site-description" itemprop="description">小  徐</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:TsuiCyne@outlook.com" title="E-Mail → mailto:TsuiCyne@outlook.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user-circle"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">TsuiCyne</span>
</div>
  <div class="powered-by">Powered By  <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'vWVSKpB13xILK5EQxDL2yTKG-MdYXbMMI',
      appKey     : '4QF7GDNz6kzBgiLWxehflIyF',
      placeholder: "\\*请您务必填写完整昵称与邮箱，否则评论可能被吞",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
